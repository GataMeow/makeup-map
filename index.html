<!DOCTYPE html>
<html>
<head>
	<style>
		#map {
			height: 600px;
			width: 100%;
		}
	</style>
</head>
	<body>
		<h3>My Google Maps Demo</h3>
		<div id="map"></div>
		<script>
			var tiendas = [
				{
					name: 'Spa Madrid',
					telephone: '91 532 76 67',
					address: 'Calle Del Carmen 24',
					city: 'Madrid, 28013',
					location: {
						lat: 40.4189619,
						lng: -3.7046963
					}
				},
				{
					name: 'Lush Fuencarral',
					telephone: '91 523 48 32',
					address: 'Calle Fuencarral 64',
					city: 'Madrid, 28004',
					location: {
						lat: 40.4242407,
						lng: -3.7027706
					}
				},
				{
					name: 'Lush Alcalá',
					telephone: '914 35 42 53',
					address: 'Calle Alcalá 104',
					city: 'Madrid, 28009',
					location: {
						lat: 40.4252412,
						lng: -3.6765786
					}
				},
				{
					name: 'Lush LaVaguada',
					telephone: '91 731 58 52',
					address: 'CC La Vaguada  c/Monforte de Lemos',
					city: 'Madrid, 28029',
					location: {
						lat: 40.4799979,
						lng: -3.7096667
					}
				},
				{
					name: 'Lush Plenilunio',
					telephone: '911 93 56 64',
					address: 'Calle Aracne, 3',
					city: 'Madrid, 28022',
					location: {
						lat: 40.4466365,
						lng: -3.5892125
					}
				},
				{
					name: 'Lush Valencia',
					telephone: '96 352 16 34',
					address: 'Colón 13',
					city: 'Valencia, 46004',
					location: {
						lat: 39.468285,
						lng: -0.3756067
					}
				},
				{
					name: 'Lush Bilbao',
					telephone: '945 09 00 49',
					address: ' On Diego López Haroko Kale Nagusia, 6',
					city: ' Bilbao, 48001',
					location: {
						lat: 43.2618069,
						lng: -2.9305694
					}
				},
				{
					name: 'Lush Santander',
					telephone: '94 236 46 67',
					address: ' Calle San Francisco, 15',
					city: 'Santander, 39002',
					location: {
						lat: 43.4618864,
						lng: -3.8102904

					}
				},
				{
					name: 'Lush Sevilla',
					telephone: '945 09 00 49',
					address: 'Calle Sierpes, 58',
					city: ' Sevilla, 41004',
					location: {
						lat: 37.3902076,
						lng: -5.9967679
					}
				},
				{
					name: 'Lush Gran Vía 2',
					telephone: '93 259 12 36',
					address: ' CC Gran Via 2 Av. Granvia 75',
					city: ' L\'Hospitalet de Lobregat, 8908',
					location: {
						lat: 41.3591154 ,
						lng: 2.1273769
					}
				},
				{
					name: 'Lush L’Illa',
					telephone: '93 410 25 84',
					address: ' CC L\'Illa Diagonal Av. Diagonal 545-565',
					city: ' Barcelona, 08029',
					location: {
						lat: 41.3896623,
						lng: 2.132882
					}
				},
				{
					name: 'Lush Arenas',
					telephone: '93 327 80 49',
					address: 'CC Las Arenas Gran Vía de les Corts Catalanes 373',
					city: ' Barcelona, 08015',
					location: {
						lat: 41.3762983,
						lng: 2.1470282
					}
				},
				{
					name: 'Lush Barcelona Centro',
					telephone: '93 360 70 96',
					address: ' Rambla Catalunya 52',
					city: ' Barcelona, 08007',
					location: {
						lat: 41.391376,
						lng: 2.1377112
					}
				},
				{
					name: 'Lush Maremagnum',
					telephone: '931 99 83 99',
					address: ' Edifici Maremàgnum, Moll d\'Espanya, 5 ',
					city: ' Barcelona, 08039',
					location: {
						lat: 41.4408095,
						lng: 2.1282698
					}
				},
				{
					name: 'Lush La Maquinista',
					telephone: '931 99 83 98',
					address: ' Carrer de Potosí, 2',
					city: ' Barcelona, 08030',
					location: {
						lat: 41.4408309,
						lng: 2.1962987
					}
				},
				{
					name: 'Lush Mallorca',
					telephone: '97 172 29 12',
					address: ' Calle Sant Miquel 46 ',
					city: ' Palma de Mallorca, 7002',
					location: {
						lat: 39.574619 ,
						lng: 2.6500144
					}

				},
			];

			function getContentTienda(tienda) {
				return '<h1>' + tienda.name + '</h1>' +
					'<p>' + tienda.telephone + '</p>' +
					'<p>' + tienda.address + '<br/>' + tienda.city + '</p>';
			}

			function initMap() {
				var markers = [];
				var ventanasInfo = [];
				var spain = {lat: 40.0998791, lng: -3.842226};
				var map = new google.maps.Map(document.getElementById('map'), {
					zoom: 6,
					center: spain
				});
				for (var i = 0; i < tiendas.length; i++) {
					var tienda = tiendas[i];
					var marker = new google.maps.Marker({
						position: tienda.location,
						map: map
					});
					markers.push(marker);
					(function (i) {
						marker.addListener('click', function() {
							var ventana = new google.maps.InfoWindow({
								content: getContentTienda(tiendas[i])
							});
							for (var j = 0; j < ventanasInfo.length; j++) {
								ventanasInfo[j].close();
							}
							ventanasInfo.push(ventana);
							ventana.open(map, markers[i]);
						});
					}) (i);
				}
			}
		</script>
		<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCKS43R2XnwVFOoZUFMO072OpvgHwSMz_k&callback=initMap">
		</script>
	</body>
</html>
